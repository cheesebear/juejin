function _argus_decode(r){var e=/[\t\n\f\r ]/g;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var t="argus";var n=3;function decode(r){r=String(r).replace(e,"");var t=r,n=t.length;if(n%4===0){r=r.replace(/==?$/,"");n=r.length}if(n%4===1||/[^+a-zA-Z0-9/]/.test(r))throw new Error("Invalid character: the string to be decoded is not correctly encoded.");var c=0;var o,d;var g="";var i=-1;while(++i<n){d=a.indexOf(r.charAt(i));o=c%4?o*64+d:d;if(c++%4)g+=String.fromCharCode(255&o>>(-2*c&6))}return g}var c=r.replace(/\$/g,"V").replace(/\-/g,"Y").replace(/\*/g,"G").replace(/\%/g,"U");for(var o=0;o<n;o++)c=decode(c);c=c.slice(0,c.length-t.length);return c};
(window.webpackJsonp=window.webpackJsonp||[]).push([[49,337],{1062:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l}));var r,o,c=n(39);function l(e,t){Object(c.g)(e,t)}!function(e){e.FollowShow="follow_show",e.FollowClick="follow_click",e.FollowCancel="follow_cancel",e.FollowingFeedShow="following_feed_show"}(r||(r={})),function(e){e[e.followCommendCard=0]="followCommendCard",e[e.hotAuthors=1]="hotAuthors",e[e.homeUserPopover=2]="homeUserPopover",e[e.postUserCard=4]="postUserCard",e[e.postTop=5]="postTop",e[e.postStickyBar=6]="postStickyBar",e[e.userCenterTop=7]="userCenterTop",e[e.userCenterStickyBar=8]="userCenterStickyBar",e[e.userCenterMomentFeed=9]="userCenterMomentFeed",e[e.userCenterFollowing=10]="userCenterFollowing",e[e.userCenterTeam=11]="userCenterTeam",e[e.userCenterFollowers=12]="userCenterFollowers",e[e.commentUserPopover=13]="commentUserPopover",e[e.pinFeedUserPopover=14]="pinFeedUserPopover",e[e.pinDiggDetail=15]="pinDiggDetail",e[e.pinDetail=16]="pinDetail",e[e.clubDetail=18]="clubDetail",e[e.searchResult=19]="searchResult",e[e.teamCenterTop=20]="teamCenterTop",e[e.other=100]="other"}(o||(o={}))},1076:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n(63),n(43),n(239),n(67),n(20);var r=n(5),o=n(3),c=n(93),l=n(133),d=n(24),m=n(4),h=n(176),f=n(1083),v=n(1),w=n(1062),_=n(240);function O(){var e,t,n,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},O=Object(f.a)(),j=Object(o.w)(),R=Object(o.c)(),C=Object(o.n)(!1),S=Object(o.n)(!1),P=[],k=Object(o.n)(!1),x=Object(o.n)(""),F=Object(o.n)(d.d.UserType),E=Object(o.n)(w.b.other),L=Object(o.n)("关注失败，请稍后重试~"),A=Object(o.n)(""),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.itemId,n=e.itemType,r=e.isFollow,o=e.teaFollowType,c=e.errorText,l=e.successText;void 0!==t&&(x.value=t),void 0!==n&&(F.value=n),void 0!==r&&(k.value=r),void 0!==o&&(E.value=o),void 0!==c&&(L.value=c),void 0!==l&&(A.value=l),"boolean"==typeof r&&(S.value=!0)},I=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==R?void 0:R.proxy.$ensureAuthorized({loginGuideFrom:l.b.focus_login});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:if(!t||"string"==typeof t){e.next=10;break}return e.abrupt("return",!1);case 10:if((null!=t?t:x.value)&&(null!=n?n:F.value)){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o,l,f,v,O,T,R,S,P,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return v=null!=t?t:x.value,O=null!=n?n:F.value,T=null!==(o=null==r?void 0:r.successText)&&void 0!==o?o:A.value,R=null!==(l=null==r?void 0:r.errorText)&&void 0!==l?l:L.value,C.value=!0,S=!0,e.prev=10,e.next=13,y({itemId:v,itemType:O});case 13:0===(P=e.sent).err_no?(k.value=!0,T&&c.Message.success(T)):(S=!1,Object(h.b)(P.err_no)||c.Message.error(P.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),S=!1,c.Message.error(R);case 21:return C.value=!1,[d.d.UserType,d.d.Team].includes(O)&&(U=null!==(f=null==r?void 0:r.teaFollowType)&&void 0!==f?f:E.value,Object(w.c)(w.a.FollowClick,{follow_status:S?1:0,current_page:Object(_.h)(window.location.href),follow_type:U,to_item_id:v,to_item_type:O===d.d.UserType?0:1})),O===d.d.UserType&&j.dispatch(m.FOLLOW_USER),e.abrupt("return",{isSuccess:S,targetStatus:!0});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o,l,h,f,v,O,y,R,S,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return f=null!=t?t:x.value,v=null!=n?n:F.value,O=null!==(o=null==r?void 0:r.successText)&&void 0!==o?o:A.value,y=null!==(l=null==r?void 0:r.errorText)&&void 0!==l?l:L.value,C.value=!0,R=!0,e.prev=10,e.next=13,T({itemId:f,itemType:v});case 13:0===(S=e.sent).err_no?(k.value=!1,O&&c.Message.success("取消".concat(O))):(R=!1,c.Message.error(S.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),R=!1,c.Message.error("取消".concat(y));case 21:return C.value=!1,[d.d.UserType,d.d.Team].includes(v)&&(P=null!==(h=null==r?void 0:r.teaFollowType)&&void 0!==h?h:E.value,Object(w.c)(w.a.FollowCancel,{follow_status:R?1:0,current_page:Object(_.h)(window.location.href),follow_type:P,to_item_id:f,to_item_type:v===d.d.UserType?0:1})),v===d.d.UserType&&j.dispatch(m.UNFOLLOW_USER),e.abrupt("return",{isSuccess:R,targetStatus:!1});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=r?r:k.value)){e.next=7;break}return e.next=4,N(t,n,o);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,M(t,n,o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),V=function(e){var t,n,r;var o=null!==(t=null==e?void 0:e.currentPage)&&void 0!==t?t:Object(_.h)(window.location.href),c=null!==(n=null==e?void 0:e.teaFollowType)&&void 0!==n?n:S.value?E.value:void 0,l=null!==(r=null==e?void 0:e.isFollow)&&void 0!==r?r:S.value?k.value:void 0;void 0!==c&&void 0!==l?Object(w.c)(w.a.FollowShow,{current_page:o,follow_type:c,button_status:l?1:0}):P.push({currentPage:o,teaFollowType:c,isFollow:l})};return U(v),Object(o.x)(S,(function(){S.value&&(P.forEach((function(e){var t=e.currentPage,n=e.teaFollowType,r=e.isFollow;V({currentPage:t,teaFollowType:null!=n?n:E.value,isFollow:null!=r?r:k.value})})),P.splice(0,P.length))})),{isFollow:k,followLoading:C,doFollow:(n=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return M(t,n,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)}),cancelFollow:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return N(t,n,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)}),toggleFollow:(e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return D(t,n,r,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,n,r,o){return e.apply(this,arguments)}),setFollowInfo:U,traceFollowShow:V}}function y(e){var t=e.itemId,n=e.itemType;return Object(v.d)({url:"/interact_api/v1/follow/do",method:"post",showError:!1,body:{id:t,type:n}})}function T(e){var t=e.itemId,n=e.itemType;return Object(v.d)({url:"/interact_api/v1/follow/undo",method:"post",showError:!1,body:{id:t,type:n}})}},1083:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(10);var r=n(13),o=n(14),c=function(){function e(){Object(r.a)(this,e),this.busy=!1}return Object(o.a)(e,[{key:"do",value:function(e){var t=this;return this.busy?Promise.resolve(void 0):(this.busy=!0,Promise.resolve("function"==typeof e?e():e).then((function(e){return t.busy=!1,e})).catch((function(e){return t.busy=!1,Promise.reject(e)})))}}]),e}();function l(){return new c}},1090:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(20);var r=n(5),o=n(3);function c(){var e=Object(o.c)();return{openReportModal:function(t,n){if(e){var r=e.proxy.$getBean("eventBus");r.emit(r.eventType.REPORT_CONTENT,t,n)}}}}function l(e){var t=Object(o.m)({visible:!1,show:!1});function n(){return(n=Object(r.a)(regeneratorRuntime.mark((function n(r,o){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.$validLogin()){n.next=2;break}return n.abrupt("return");case 2:t.show||(t.show=!0),t.visible=!0,t.itemId=r,t.idType=o;case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{reportModalData:t,showReportModal:function(e,t){return n.apply(this,arguments)}}}},1205:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return v}));n(10),n(30),n(58),n(121),n(60),n(98);var r=n(61),o=n(64),c=n(12),l=n(133);function d(){var e=new URLSearchParams,t=Object(c.e)()||Object(c.f)()?"jjv636elhseb626s":"jj6eipgo1jpnp8uz",n=Object(c.e)()||Object(c.f)()?"marscode-boe."+_argus_decode("$1c1c01*cFh$bWhp-l%1c1RHMDFiR1JI%m5s-%0xWj-"):"www.marscode.cn";return e.append("client_key",t),e.append("scope","user_info,user.info.basic"),e.append("source","web"),e.append("aid","2608"),e.append("redirect_uri","https://".concat(n,"/cloudide/api/v3/public/BindJuejinAccount")),fetch("/passport/open/web/auth/",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e})}function m(e,t){var n=window.location.search,r=new URL(e),o=new URLSearchParams(r.search),c=new URLSearchParams(n),d=function(e){var t=new URLSearchParams;return e===l.b.code_assistant||e===l.b.ai_summary?(t.set("utm_source","ai_assitant"),t.set("utm_medium","juejin"),t.set("utm_campaign","registration")):e!==l.b.book_ai_learning&&e!==l.b.book_section_ai_learning||(t.set("utm_source","ai_learning"),t.set("utm_medium","juejin"),t.set("utm_campaign","registration")),t}(t);return fetch(e,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({Platform:"PC",UtmSource:d.get("utm_source")||c.get("utm_source")||"",UtmMedium:d.get("utm_medium")||c.get("utm_medium")||"",UtmCampaign:d.get("utm_campaign")||c.get("utm_campaign")||"",UtmTerm:c.get("utm_term")||"",UtmContent:c.get("utm_content")||"",Code:o.get("code")||""})})}function h(){var e=Object(o.a)()||"0";localStorage.setItem(e+"_marsauthed","true")}function f(){var e=Object(o.a)()||"0",t=localStorage.getItem(e+"_marsauthed");try{return!!t&&JSON.parse(t)}catch(e){return!1}}function v(){return new Promise((function(e,t){r.a.GetUserConnectInfo({platform_app_id:Object(c.e)()||Object(c.f)()?202369:15391}).then((function(t){0===t.err_no?e(t.platform_app_uid||""):e("")})).catch((function(){return t()}))}))}},1393:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return T}));n(20);var r=n(5),o=n(3),c=n(7),l=n(61),d=n(22),m=n(17),h=n(241),f=n(64);function v(e){var t=Object(h.i)({maxDurationMS:9e4}),n=t.stayDuration,m=t.isCancelled,f=t.cancel;function v(){return(v=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.ViewContent,item_id:t});case 5:(n=e.sent).err_no!==c.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(n.err_msg)):f(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("error reportViewContentJScore err:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(o.y)((function(){n.value>=9e4&&function(e){v.apply(this,arguments)}(e)}))}function w(){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],n=t?Object(f.f)(sessionStorage.getItem(m.b.reportBindPhoneJScore)||"null"):{growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.BindPhone,item_id:"0"}){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t||sessionStorage.setItem(m.b.reportBindPhoneJScore,JSON.stringify(n)),e.next=8,l.a.AddPointReport(n);case 8:(r=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(r.err_msg)),sessionStorage.removeItem(m.b.reportBindPhoneJScore),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.warn("error reportBindPhoneJScore, set to sessionStorage, ".concat(JSON.stringify(n)," err:"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}function O(){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.UploadFavicon,item_id:"0"});case 3:(t=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportUploadAvatarJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportUploadAvatarJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.ModifyScreenName,item_id:"0"});case 3:(t=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportModifyScreenNameJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportModifyScreenNameJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},1832:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(10),n(62),n(20);var r=n(5),o=n(7),c=n(135),l=n(17),d=n(12),m=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",setTimeout((function(){return Promise.resolve()}),t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function h(e){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||Object(d.i)()){e.next=17;break}if(localStorage.getItem(l.a.userFirstVisitDispatchCoupon)!==t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,c.b.UserCouponReceiveDiscountFirstOrder({},{showError:!1});case 7:if((null==(n=e.sent)?void 0:n.err_no)!==o.ERROR_NO.OK){e.next=12;break}return localStorage.setItem(l.a.userFirstVisitDispatchCoupon,t),e.next=12,m();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error("userFirstVisitDispatchCoupon api request error:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}},2905:function(e,t,n){},2906:function(e,t,n){},4362:function(e,t,n){n(11);var r=n(171),o=n(203);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,m=data.class,h=data.staticClass,style=data.style,f=data.staticStyle,v=data.attrs,w=void 0===v?{}:v,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[m,h],style:[style,f],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w)},_),d.concat([n("circle",{attrs:{cx:"12",cy:"12",r:"11",fill:"black","fill-opacity":"0.4"}}),n("circle",{attrs:{cx:"12",cy:"12",r:"11.5",stroke:"white","stroke-opacity":"0.4"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.96924 8.24087C8.76787 8.0395 8.4414 8.0395 8.24003 8.24087C8.03867 8.44223 8.03867 8.76871 8.24003 8.97007L11.2919 12.022L8.02407 15.2898C7.82271 15.4912 7.82271 15.8177 8.02407 16.019C8.22543 16.2204 8.55191 16.2204 8.75327 16.019L12.0211 12.7512L15.289 16.019C15.4904 16.2204 15.8168 16.2204 16.0182 16.019C16.2196 15.8177 16.2196 15.4912 16.0182 15.2898L12.7503 12.022L15.8022 8.97007C16.0036 8.76871 16.0036 8.44223 15.8022 8.24087C15.6009 8.0395 15.2744 8.0395 15.073 8.24087L12.0211 11.2928L8.96924 8.24087Z",fill:"white","fill-opacity":"0.9"}})]))}}},4363:function(e,t,n){"use strict";n(2905)},4364:function(e,t,n){"use strict";n(2906)},4708:function(e,t,n){"use strict";n.r(t);n(63),n(43),n(28),n(119),n(57),n(82),n(10),n(134),n(30),n(50),n(67),n(142),n(238),n(68),n(62);var r=n(0),o=(n(20),n(5)),c=n(3),l=n(93),d=n(107),m=n(61),h=n(1832),f=n(1205),v=(n(11),n(45),n(8)),w=n(46),_=n.n(w),O=n(4362),y=n.n(O),T=n(17),j=n(4),R=Object(v.defineComponent)({components:{CloseIcon:y.a},emits:["show"],setup:function(e,t){var n=t.root,r=t.emit,l=[{name:"timelineIndex",alias:"home",traceShowKey:"ad_web_pop_show",traceClickKey:"ad_web_pop_click"},{name:"column",alias:"post",traceShowKey:"ad_web_article_pop_show",traceClickKey:"ad_web_article_pop_click"}],d=Object(c.u)(),m=Object(v.ref)(),h=function(){var e=localStorage.getItem(T.a.showAdTccModal)||"[]",t=[];try{var n=JSON.parse(e);Array.isArray(n)&&(t=n)}catch(e){console.error(e),t=[]}return t},f=function(){return l.filter((function(e){return e.name===(d.value.name||"")}))},w=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,o,c,l,d,v,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$device.isDesktop){e.next=2;break}return e.abrupt("return");case 2:if(!(c=f()).length){e.next=13;break}return e.next=6,n.$store.dispatch(j.TCC_CONFIG,"juejin_config_web_ad_home_post");case 6:l=e.sent,d=(null===(t=l)||void 0===t?void 0:t[c[0].alias])||[],v=Date.now()/1e3,(w=d.filter((function(e){return v>_()(e.startTime).unix()&&v<_()(e.endTime).unix()}))).length&&!h().includes("".concat((null===(o=w[0])||void 0===o?void 0:o.id)||""))&&(r("show"),m.value=w[0],O(c[0].traceShowKey)),e.next=14;break;case 13:m.value&&(m.value=void 0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.watch)((function(){return d.value.name}),(function(){w()})),Object(v.onMounted)((function(){w()}));var O=function(e){var t,r;e&&n.$TEA(e,{id:(null===(t=m.value)||void 0===t?void 0:t.id)||"",ad_url:(null===(r=m.value)||void 0===r?void 0:r.url)||""})},y=function(e){var t,r,o;n.$TEA(null===(t=f()[0])||void 0===t?void 0:t.traceClickKey,{id:(null===(r=m.value)||void 0===r?void 0:r.id)||"",ad_url:(null===(o=m.value)||void 0===o?void 0:o.url)||"",click_type:e})};return{activeAd:m,closeAd:function(){var e;localStorage.setItem(T.a.showAdTccModal,JSON.stringify(h().concat(["".concat((null===(e=m.value)||void 0===e?void 0:e.id)||"")]))),y("skip"),m.value=void 0},handleClick:function(){y("enter"),window.open(m.value.url,"_blank")}}}}),C=(n(4363),n(29)),S=Object(C.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activeAd?n("div",{staticClass:"poster-wrap",on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[n("div",{staticClass:"poster-close-wrap",on:{click:function(t){return t.stopPropagation(),e.closeAd(t)}}},[n("CloseIcon",{staticClass:"poster-close-icon"})],1),e._v(" "),n("div",{staticClass:"poster-img-wrap"},[n("img",{staticClass:"poster-img",attrs:{src:e.activeAd.imgUrl}})]),e._v(" "),n("div",{staticClass:"poster-title"},[e._v(e._s(e.activeAd.title))])]):e._e()}),[],!1,null,"144bae02",null).exports,P=n(133),k=n(1090),x=n(1076),F=n(21);var E=n(474),L=n(96),A=n(161),U=n(64),I=n(211),M=n(31),N=n(44),D=n(12),V=n(1393),B=n(309);function G(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function $(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?G(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):G(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var J=0,H=["/bind","/login","/mobile/lottery","/mobile/lottery/welfare","/getting-started","/app","/delete/account","/mobile/bugfix","/bugfix/rank",/^\/meeting/,"/challenge/1","/challenge/1/detail"],K=Object(c.b)({components:{AlertList:function(){return n.e(185).then(n.bind(null,4725))},ErrorView:function(){return Promise.resolve().then(n.bind(null,533))},BindPhoneModal:function(){return n.e(37).then(n.bind(null,4623))},NewUserLead:function(){return n.e(136).then(n.bind(null,4705))},PinModal:function(){return n.e(70).then(n.bind(null,4778))},AuthModal:function(){return Promise.all([n.e(16),n.e(20)]).then(n.bind(null,4622))},AuthModalNew:function(){return Promise.all([n.e(16),n.e(180)]).then(n.bind(null,4736))},ActivityRecommend:function(){return n.e(213).then(n.bind(null,4779))},AccountDeleteModal:function(){return n.e(175).then(n.bind(null,2984))},GlobalFloatBanner:function(){return Promise.all([n.e(340),n.e(181)]).then(n.bind(null,4780))},GlobalFullscreenPopUp:function(){return n.e(182).then(n.bind(null,4781))},SuspensionPanel:function(){return n.e(104).then(n.bind(null,4702))},VipBorrowModal:function(){return n.e(190).then(n.bind(null,4737))},UserGrowthLead:function(){return n.e(116).then(n.bind(null,4703))},UserGrowthPopup:function(){return n.e(139).then(n.bind(null,4782))},UpgradeBox:function(){return n.e(183).then(n.bind(null,4783))},Report:function(){return Promise.all([n.e(343),n.e(132)]).then(n.bind(null,4738))},BottomLoginGuide:function(){return n.e(192).then(n.bind(null,4784))},HomePostTccAd:S,FixedResourceTccConfig:function(){return n.e(195).then(n.bind(null,4785))},DarkModeNotification:function(){return n.e(189).then(n.bind(null,4786))},RiskModal:function(){return n.e(204).then(n.bind(null,4787))}},setup:function(e,t){var n=t.root,r=Object(c.w)(),d=Object(c.v)(),h=Object(x.a)().doFollow;r.dispatch(j.LOAD_THEME);var f=Object(k.b)(n),v=f.showReportModal,w=f.reportModalData,_=Object(c.a)((function(){return Object(F.h)(d.currentRoute.fullPath)}));Object(c.j)((function(){var e,t,o=n.$getBean("eventBus");o.onVmLife(n,o.eventType.REPORT_CONTENT,v),!_.value&&(null===(t=null===(e=r.state.auth)||void 0===e?void 0:e.user)||void 0===t?void 0:t.user_id)&&(r.dispatch(j.FETCH_ORE_COUNT),r.dispatch(j.FETCH_AVATAR_MENU_INFO),m.a.CompleteTask().catch((function(){}))),Object(V.a)(!0)}));var style=Object(c.a)((function(){var e;return null===(e=n.$store.getters[j.TCC_STYLE])||void 0===e?void 0:e.trim()})),script=Object(c.a)((function(){var e;return null===(e=n.$store.getters[j.TCC_SCRIPT])||void 0===e?void 0:e.trim()})),O=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:script.value&&((t=document.createElement("script")).innerHTML=script.value,document.documentElement.appendChild(t)),style.value&&((n=document.createElement("style")).innerHTML=style.value,document.head.appendChild(n));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.j)(Object(o.a)(regeneratorRuntime.mark((function e(){var t,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$store.dispatch(j.TCC_CONFIG),!(null===(t=r.state.auth)||void 0===t?void 0:t.user)){e.next=13;break}if(o=localStorage.getItem(T.a.autoFollowUser),localStorage.removeItem(T.a.autoFollowUser),!o){e.next=11;break}if(!(c=Object(U.f)(o,(function(e){return"number"==typeof(null==e?void 0:e.expire)&&e.expire>Date.now()})))){e.next=11;break}return e.next=9,h(c.itemId,c.itemType,{teaFollowType:c.teaFollowType});case 9:(d=e.sent)&&d.isSuccess&&l.Message.success("关注成功");case 11:e.next=15;break;case 13:Object(U.f)(localStorage.getItem(T.a.autoFollowUser),(function(e){return"number"==typeof(null==e?void 0:e.expire)&&e.expire>Date.now()}))||localStorage.removeItem(T.a.autoFollowUser);case 15:case"end":return e.stop()}}),e)})))),Object(A.a)((function(e){var t;!e||e.isBindedPhone||["app","mobilBugfix","bugfixRank","setting","deleteAccount","setting:profile","setting:account","setting:common","setting:block","setting:message"].includes((null===(t=null==d?void 0:d.currentRoute)||void 0===t?void 0:t.name)||"")||n.$requestBindPhoneNumber("",{closable:!1})})),Object(c.x)([style,script],(function(){O()})),function(e){var t=Object(c.w)(),n=Object(c.v)(),r=Object(c.a)((function(){var e;return null===(e=t.state.auth)||void 0===e?void 0:e.userInitiated})),o=Object(c.a)((function(){var e;return null===(e=t.state.auth)||void 0===e?void 0:e.user})),l=Object(c.a)((function(){return Object(F.h)(n.currentRoute.fullPath)}));Object(c.x)(r,(function(t){l.value&&t&&e(!!o.value)}),{immediate:!0})}((function(e){e&&(r.dispatch(j.FETCH_ORE_COUNT),r.dispatch(j.FETCH_AVATAR_MENU_INFO),m.a.CompleteTask())})),$($({},Object(L.c)()),{},{reportModalData:w},Object(E.a)())},data:function(){return{visibleAuthForm:null,visibleAuthFormNew:null,isSuspensionPanelVisible:!1,isAlertListVisible:!1,newuserTicket:!1,isVisiblePinEditor:!1,isBindPhoneNumberModalVisible:!1,captchaType:"SLIDE",verifyCallback:"",bindPhoneMsg:"",to:"",isLogoutModalVisible:!1,UserLeadPopupShowed:!1,isFromMainPageSigninClick:!1,enter_method:"",bindPhoneOption:{},popupMutex:!1,isShowVipBorrow:!1,vipTeaParams:{},bookInfo:{},hideRecommendComponent:!1,closeRedirectParams:null,loginGuideFooterVisible:!1,hasTccAd:!1,loginGuideFrom:void 0,customLoginTitle:void 0}},computed:$($({},Object(d.mapGetters)({user:j.USER,activity:j.ACTIVITY,logined:j.LOGINED,unreadNotificationCount:j.UNREAD_NOTIFICATION_COUNT,errorView:j.ERROR_VIEW,statusCode:j.STATUS_CODE,needSuspension:j.NEED_SUSPENSION,needRiskModal:j.NEED_RISK_MODAL,userInitiated:j.USER_INITIATED})),{},{isInApp:function(){return Object(D.i)(this.$nuxt.context)},displayedUnreadNotificationAmount:function(){return Object(B.e)(this.unreadNotificationCount.total)},titleTemplate:function(){return this.displayedUnreadNotificationAmount?"(".concat(this.displayedUnreadNotificationAmount,") %s - 掘金"):"%s - 掘金"},date:function(){return Object(M.b)(new Date,"MMDD")},recommendComponent:function(){var e;return this.hideRecommendComponent||["login","lognIndex","bindIndex","offer","presalePay","presaleIndex","presaleResult","vipIndex","vipPayResult","membership","membershipHome","integral","property","mall"].includes(this.$route.name)||this.$route.path.startsWith("/creator")?null:1===(null===(e=this.activity[2020])||void 0===e?void 0:e.is_show)?"ActivityRecommend":null},isPathExcluded:function(){var path=this.$router.currentRoute.path;return H.some((function(e){return e instanceof RegExp?e.test(path):e===path}))}}),watch:{visibleAuthForm:function(e){this.visibleMobileExtension(!e)},user:function(e){var t=this.$route.name||"";("courseIndex"!==t||this.$route.path.includes("bytetech"))&&(["bookInfo","column"].includes(t)||Object(h.a)((null==e?void 0:e.user_id)||""))},$route:function(){this.checkLogin(),this.modalStyleTimer&&clearTimeout(this.modalStyleTimer),this.modalStyleTimer=setTimeout((function(){document.body.style.overflow="",document.body.style.paddingRight=""}),300)},userInitiated:{handler:function(e){if(e&&(this.checkLogin(),this.$device.isDesktop)){var t=localStorage.getItem("juejin_2608_theme")||"{}",n=JSON.parse(t),r=n.theme,o=void 0===r?"light":r,c=n.isFollowSystem,l=void 0!==c&&c;this.$TEA("current_theme",{theme:o,isFollowSystem:l})}},immediate:!0}},mounted:function(){J=new Date,this.initEventListener(),this.mountAlertList(),this.mountSuspensionPanel(),this.$store.dispatch(j.ACTIVITY),this.modalStyleTimer=null,"1"!==window.sessionStorage.getItem("IS_DELETE")||this.popupMutex||this.isPathExcluded||(this.isLogoutModalVisible=!0,this.popupMutex=!0,window.sessionStorage.removeItem("IS_DELETE"))},beforeDestroy:function(){Object(N.q)(this.handleVisibilityChange),this.modalStyleTimer&&clearTimeout(this.modalStyleTimer)},methods:$($({},Object(d.mapActions)({fetchCurrentUser:j.FETCH_CURRENT_USER})),{},{visibleMobileExtension:function(e){var t=document.getElementById("mobile-newuser-ticket");null!==t&&(t.style.opacity=Number(e))},checkLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.getters.USER){t.next=6;break}return t.next=3,e.$store.dispatch(j.TCC_CONFIG,"juejin_login_config");case 3:c=t.sent,(null==(l=null===(o=null===(r=null===(n=c)||void 0===n?void 0:n.mustLogin)||void 0===r?void 0:r.bookIds)||void 0===o?void 0:o.map((function(e){return{reg:new RegExp("^/((book)|(video))/(m/)?".concat(e,"/section/\\d+$")),id:e}})))?void 0:l.length)&&window.location.pathname&&l.forEach((function(t){var n=t.reg,r=t.id;n.test(window.location.pathname)&&e.$requestLogin({closeRedirectParams:{name:"bookInfo",params:{id:r}}})}));case 6:case"end":return t.stop()}}),t)})))()},initEventListener:function(){var e=this,t=this.$getBean("eventBus"),n=t.eventType;t.onVmLife(this,n.VISIBLE_LOGOUT_MODAL,(function(){e.isLogoutModalVisible=!0})),t.onVmLife(this,n.REQUEST_LOGIN,(function(t){var n=t||{},r=n.click,o=void 0!==r&&r,c=n.enterMethod,l=n.closeRedirectParams,d=n.successRedirectUrl,m=n.loginGuideFrom,h=n.customLoginTitle;e.isFromMainPageSigninClick=o,e.enter_method=c;var v=Object(f.c)();m!==P.b.code_assistant&&m!==P.b.youthcamp&&m!==P.b.problem_set&&m!==P.b.book_ai_learning&&m!==P.b.problem_set_status&&m!==P.b.book_section_ai_learning&&m!==P.b.ai_summary&&m!==P.b.youthcamp_ambassador||v?e.visibleAuthForm="login-with-phone":e.visibleAuthFormNew="login-with-phone",e.newuserTicket=null,e.closeRedirectParams=l||null,e.loginGuideFrom=m,e.customLoginTitle=h,e.to=d||""})),t.onVmLife(this,n.SHOW_VIP_BORROW_MODAL,(function(t,n){e.isShowVipBorrow=!0,e.bookInfo=t,e.vipTeaParams=n})),t.onVmLife(this,n.REQUEST_LOGIN_REDIRECT,(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;e.isFromMainPageSigninClick=t,e.enter_method=n,e.visibleAuthForm="login-with-phone",e.newuserTicket=null,e.to=r})),t.onVmLife(this,n.REQUEST_REGISTER,(function(t){e.visibleAuthForm="register",e.newuserTicket=t})),t.onVmLife(this,n.REQUEST_RESET_PASSWORD,(function(){e.visibleAuthForm="reset-password"})),t.onVmLife(this,n.AUTHORIZED,(function(){e.visibleAuthForm=null})),t.onVmLife(this,n.REQUEST_LOGOUT,(function(){e.$store.dispatch(j.LOGOUT)})),t.onVmLife(this,n.ALERT,(function(content,t){e.$refs.alertList.$emit("push",{content:content,type:t})})),t.onVmLife(this,n.CREATE_PIN,(function(t){e.isVisiblePinEditor="pin",e.editorProps=t})),t.onVmLife(this,n.BIND_PHONE_NUMBER,(function(t,option){e.bindPhoneMsg=t||"",e.isBindPhoneNumberModalVisible=!0,e.bindPhoneOption=option;var n=e.$getBean("eventBus");n.emit(n.eventType.LOCK_ROOT_CONTAINER_SCROLL)})),Object(I.d)(),Object(N.o)(this.handleVisibilityChange)},mountAlertList:function(){this.isAlertListVisible=!0},mountSuspensionPanel:function(){this.isSuspensionPanelVisible=!this.isPathExcluded},onBindPhoneNumberModalClose:function(){var e=this.$getBean("eventBus");this.fetchCurrentUser(),this.isBindPhoneNumberModalVisible=!1,e.emit(e.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},collectPageStayTime:function(){var e=0;J&&(e=new Date-J),this.$TEA("main_site_stay",{user_id:this.user?this.user.id:"unknown",page_link:window.location.href,stay_time:e}),J=0},handleVisibilityChange:function(){var e=Object(N.d)();document[e]?this.collectPageStayTime():J=new Date},closeRecommendComponent:function(){this.hideRecommendComponent=!0},closeAuthModal:function(e){this.visibleAuthForm=null,this.visibleAuthFormNew=null,this.customLoginTitle=void 0,localStorage.setItem("isLoginFromCodeAssistant",String((this.loginGuideFrom===P.b.code_assistant||this.loginGuideFrom===P.b.youthcamp||this.loginGuideFrom===P.b.problem_set||this.loginGuideFrom===P.b.problem_set_status||this.loginGuideFrom===P.b.book_ai_learning||this.loginGuideFrom===P.b.book_section_ai_learning||this.loginGuideFrom===P.b.ai_summary||this.loginGuideFrom===P.b.youthcamp_ambassador)&&Boolean(e))),this.loginGuideFrom=void 0,!0!==e&&this.closeRedirectParams&&this.$router.push(this.closeRedirectParams)}})}),W=(n(4364),Object(C.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"juejin"}},[e.errorView?[n("client-only",[n("ErrorView",{attrs:{"status-code":e.statusCode}})],1)]:n("router-view"),e._v(" "),e.recommendComponent?n(e.recommendComponent,{tag:"component",attrs:{logined:e.logined},on:{close:e.closeRecommendComponent}}):e._e(),e._v(" "),n("div",{staticClass:"global-component-box"},[n("ClientOnly",[e.isAlertListVisible?n("AlertList",{ref:"alertList",staticClass:"alert-list"}):e._e(),e._v(" "),e.isSuspensionPanelVisible&&e.needSuspension?n("SuspensionPanel",{staticClass:"suspension-panel",attrs:{"has-extension-banner":Boolean(e.recommendComponent)}}):e._e(),e._v(" "),e.isBindPhoneNumberModalVisible?n("BindPhoneModal",{attrs:{visible:e.isBindPhoneNumberModalVisible,msg:e.bindPhoneMsg,to:e.bindPhoneOption.toUrl||"",closable:e.bindPhoneOption.closable,title:e.bindPhoneOption.title,"trigger-type":e.bindPhoneOption.triggerType},on:{close:e.onBindPhoneNumberModalClose}}):e._e(),e._v(" "),e.isVisiblePinEditor?n("PinModal",{attrs:{"editor-props":e.editorProps},on:{close:function(t){e.isVisiblePinEditor=!1}}}):e._e(),e._v(" "),e.visibleAuthForm?n("AuthModal",{attrs:{type:e.visibleAuthForm,"newuser-ticket":e.newuserTicket,to:e.to,"is-from-main-page-signin-click":e.isFromMainPageSigninClick,enter_method:e.enter_method,"login-guide-from":e.loginGuideFrom,title:e.customLoginTitle},on:{close:e.closeAuthModal}}):e._e(),e._v(" "),e.visibleAuthFormNew?n("AuthModalNew",{attrs:{type:e.visibleAuthFormNew,"newuser-ticket":e.newuserTicket,to:e.to,"is-from-main-page-signin-click":e.isFromMainPageSigninClick,enter_method:e.enter_method,"login-guide-from":e.loginGuideFrom,title:e.customLoginTitle},on:{close:e.closeAuthModal}}):e._e(),e._v(" "),e.isShowVipBorrow?n("VipBorrowModal",{attrs:{"book-info":e.bookInfo,"tea-params":e.vipTeaParams},on:{closeVipBorrowModal:function(t){e.isShowVipBorrow=!1}}}):e._e()],1)],1),e._v(" "),n("ClientOnly",[n("NewUserLead",{attrs:{visible:e.showNewUserLead},on:{close:e.handleShowNewUserLeadDismiss,finish:e.handleShowNewUserLeadDismiss}}),e._v(" "),e.user_growth_lead?n("UserGrowthLead",{attrs:{logined:e.logined},on:{confirm:function(t){return e.handleUser_growth_leadDismiss("confirm")},dismiss:function(t){return e.handleUser_growth_leadDismiss("dismiss")}}}):e._e(),e._v(" "),e.showUserGrowthPopup||e.showUserGrowthPopup.visible?n("UserGrowthPopup",{attrs:{popup:e.showUserGrowthPopup.data},on:{dismiss:e.handleShowUserGrowthPopupDismiss}}):e._e(),e._v(" "),n("UpgradeBox",{attrs:{visible:e.isUpgradeBoxVisible.visible,user:e.user,"growth-info":e.isUpgradeBoxVisible.data},on:{close:e.handleIsUpgradeBoxVisibleDismiss}}),e._v(" "),e.isLogoutModalVisible?n("AccountDeleteModal",{attrs:{"need-qrcode":!1},on:{close:function(t){e.isLogoutModalVisible=!1}}},[e._v("\n      掘友您好，您当前登录账号正在注销审核期，故无法访问稀土掘金内容。如果需要取消注销申请，请登录稀土掘金App，进行放弃注销操作。如果您有任何建议和反馈，可以发送邮箱到\n      feedback@xitu.io 联系我们。给您带来的不便，我们深感抱歉。\n    ")]):e._e(),e._v(" "),e.reportModalData.show?n("Report",{attrs:{"item-id":e.reportModalData.itemId,"item-type":e.reportModalData.idType},model:{value:e.reportModalData.visible,callback:function(t){e.$set(e.reportModalData,"visible",t)},expression:"reportModalData.visible"}}):e._e()],1),e._v(" "),n("ClientOnly",[n("RiskModal"),e._v(" "),n("FixedResourceTccConfig",{on:{show:function(t){e.hasTccAd=!0}}}),e._v(" "),n("HomePostTccAd",{class:{"home-post-tcc-add":!0,"tcc-ad-with-recommend":!!e.recommendComponent},on:{show:function(t){e.hasTccAd=!0}}}),e._v(" "),e.showBottomLoginGuide?n("BottomLoginGuide",{on:{close:e.handleCloseBottomLoginGuide}}):e._e(),e._v(" "),e.isSuspensionPanelVisible&&!e.isInApp?n("GlobalFloatBanner"):e._e(),e._v(" "),e.isSuspensionPanelVisible&&!e.isInApp?n("GlobalFullscreenPopUp"):e._e()],1)],2)}),[],!1,null,null,null));t.default=W.exports}}]);
//# sourceMappingURL=0e9357a.js.map